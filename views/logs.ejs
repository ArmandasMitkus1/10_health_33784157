<!DOCTYPE html>
<html>
<head>
  <title><%= pageTitle %></title>
</head>
<body>
<header>
    <h1><a href="/">Fitness Tracker DWA</a></h1>
    <nav>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <% if (isLoggedIn) { %>
                <li><a href="/logs">Logs & Search</a></li>
                <li><a href="/add-workout">Add Workout</a></li>
                <li><a href="/charts">Charts (Advanced)</a></li>
                <li><a href="/logout">Logout (<%= username %>)</a></li>
            <% } else { %>
                <li><a href="/register">Register</a></li>
                <li><a href="/login">Login</a></li>
            <% } %>
        </ul>
    </nav>
</header>

<h1>Workout Logs</h1>

<% if (error) { %>
  <p style="color:red;"><%= error %></p>
<% } %>

<% if (!workouts || workouts.length === 0) { %>
  <p>No workouts recorded yet.</p>
<% } else { %>
  <table border="1" cellpadding="8" cellspacing="0">
    <tr>
      <th>Date</th>
      <th>Type</th>
      <th>Duration (min)</th>
      <th>Notes</th>
      <th>Actions</th>
    </tr>
    <% workouts.forEach(function(w) { %>
      <tr>
        <td>
          <%= (w.workout_date instanceof Date
                ? w.workout_date.toISOString().slice(0,10)
                : w.workout_date) %>
        </td>
        <td><%= w.type %></td>
        <td><%= w.duration_minutes %></td>
        <td><%= w.notes %></td>
        <td>
          <a href="/workouts/<%= w.id %>/edit">Edit</a>
          |
          <form method="POST" action="/workouts/<%= w.id %>/delete" style="display:inline;">
            <button type="submit" onclick="return confirm('Delete this workout?');">
              Delete
            </button>
          </form>
        </td>
      </tr>
    <% }); %>
  </table>
<% } %>

<p><a href="/add-workout">Add another workout</a></p>
</body>
</html>
